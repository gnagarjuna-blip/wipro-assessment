<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wipro Secure Assessment Portal</title>
    <style>
        :root { --primary: #007bff; --success: #28a745; --danger: #dc3545; --bg: #f4f7f9; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg); margin: 0; user-select: none; overflow-x: hidden; }
        
        /* Security Overlay */
        #lockOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; color: white; text-align: center; justify-content: center; align-items: center; flex-direction: column; }

        .container { max-width: 800px; margin: 30px auto; background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); min-height: 550px; display: flex; flex-direction: column; position: relative; }
        header { text-align: center; border-bottom: 2px solid #eee; margin-bottom: 25px; padding-bottom: 15px; }
        header h1 { color: #2c3e50; font-size: 24px; margin: 0; }

        .timer-strip { background: #ebf4ff; border: 1px solid #b3d7ff; color: #0056b3; padding: 10px; border-radius: 8px; text-align: center; font-size: 1.2em; font-weight: bold; margin-bottom: 20px; position: sticky; top: 0; z-index: 100; }

        .question-wrapper { display: none; }
        .question-wrapper.active { display: block; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        .q-meta { color: var(--primary); font-size: 13px; font-weight: bold; text-transform: uppercase; margin-bottom: 8px; display: block; }
        .q-text { font-size: 18px; line-height: 1.5; color: #333; margin-bottom: 25px; }

        .options label { display: block; padding: 14px; border: 2px solid #edf2f7; border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; background: #fdfdfd; }
        .options label:hover { background: #f0f7ff; border-color: var(--primary); }
        .options input { margin-right: 12px; transform: scale(1.2); }

        .btn-box { margin-top: auto; padding-top: 30px; }
        .btn { padding: 16px; border: none; border-radius: 8px; font-size: 17px; font-weight: 600; cursor: pointer; width: 100%; transition: 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #0056b3; }
        .btn-submit { background: var(--success); color: white; display: none; }

        input[type="text"], input[type="email"], input[type="tel"] { width: 100%; padding: 12px; border: 1px solid #cbd5e0; border-radius: 6px; margin-top: 5px; font-size: 16px; box-sizing: border-box; }
        .form-group { margin-bottom: 20px; }

        #registrationArea, #instructionArea, #examArea, #successArea { display: none; }
        
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        code { background: #f1f1f1; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', Courier, monospace; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body oncontextmenu="return false;">

<div id="lockOverlay">
    <h2>SECURE EXAM INTERFACE</h2>
    <p>The system detected a window change. Please re-enter full-screen to continue.</p>
    <button onclick="forceFullscreen()" class="btn btn-primary" style="width: 200px;">Resume Exam</button>
</div>

<div class="container">
    <header><h1>Wipro Elite NTH Assessment</h1></header>

    <div id="registrationArea" style="display: block;">
        <h3>Candidate Authentication</h3>
        <form id="regForm">
            <div class="form-group"><label>Full Name</label><input type="text" required></div>
            <div class="form-group"><label>Email ID</label><input type="email" required></div>
            <div class="form-group"><label>Mobile Number</label><input type="tel" required pattern="[0-9]{10}"></div>
            <button type="submit" class="btn btn-primary">Start Verification</button>
        </form>
    </div>

    <div id="instructionArea">
        <h3 style="color: var(--danger);">Proctoring Instructions</h3>
        <ul style="line-height: 1.8; color: #4a5568;">
            <li>This exam consists of 35 questions (45 Minutes).</li>
            <li>Switching tabs or minimizing the browser is strictly prohibited.</li>
            <li>The assessment will auto-submit when the timer hits zero.</li>
            <li>The browser tab will close automatically after final submission.</li>
        </ul>
        <button onclick="startExam()" class="btn btn-primary">Enter Secure Environment</button>
    </div>

    <div id="examArea">
        <div class="timer-strip">Time Remaining: <span id="timer">45:00</span></div>
        <form id="assessmentForm">
            
            <div class="question-wrapper active">
                <span class="q-meta">Quant | Q1</span>
                <p class="q-text">1. A number when divided by 7 leaves remainder 3. What is the remainder when the same number is divided by 21?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="A"> 3</label>
                    <label><input type="radio" name="q1" value="B"> 10</label>
                    <label><input type="radio" name="q1" value="C"> 17</label>
                    <label><input type="radio" name="q1" value="D"> Data Insufficient</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q2</span>
                <p class="q-text">2. If $2^x \times 4^y = 512$ and $x + y = 6$, solve for $x$:</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="A"> 2</label>
                    <label><input type="radio" name="q2" value="B"> 3</label>
                    <label><input type="radio" name="q2" value="C"> 4</label>
                    <label><input type="radio" name="q2" value="D"> 5</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q3</span>
                <p class="q-text">3. 4 men and 6 women can complete a work in 8 days. 3 men and 7 women can complete it in 10 days. In how many days will 10 women complete it?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="A"> 35 days</label>
                    <label><input type="radio" name="q3" value="B"> 40 days</label>
                    <label><input type="radio" name="q3" value="C"> 45 days</label>
                    <label><input type="radio" name="q3" value="D"> 50 days</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q4</span>
                <p class="q-text">4. The sum of $n$ natural numbers is 465. Find $n$:</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="A"> 30</label>
                    <label><input type="radio" name="q4" value="B"> 31</label>
                    <label><input type="radio" name="q4" value="C"> 29</label>
                    <label><input type="radio" name="q4" value="D"> 32</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q5</span>
                <p class="q-text">5. Simple Interest on a sum for 3 years at 10% is ₹3000. Find the Compound Interest for the same period.</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="A"> ₹3310</label>
                    <label><input type="radio" name="q5" value="B"> ₹3100</label>
                    <label><input type="radio" name="q5" value="C"> ₹3300</label>
                    <label><input type="radio" name="q5" value="D"> ₹3410</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q6</span>
                <p class="q-text">6. Solve: $\log(2x) + \log(5x) = 3$</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="A"> 10</label>
                    <label><input type="radio" name="q6" value="B"> 100</label>
                    <label><input type="radio" name="q6" value="C"> $\sqrt{100}$</label>
                    <label><input type="radio" name="q6" value="D"> 1</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Quant | Q7</span>
                <p class="q-text">7. Two pipes A and B can fill a tank in 20 and 30 mins respectively. If both are opened, how long to fill?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="A"> 10 min</label>
                    <label><input type="radio" name="q7" value="B"> 12 min</label>
                    <label><input type="radio" name="q7" value="C"> 15 min</label>
                    <label><input type="radio" name="q7" value="D"> 25 min</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q8</span>
                <p class="q-text">8. Series: 2, 6, 12, 20, 30, ___?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="A"> 40</label>
                    <label><input type="radio" name="q8" value="B"> 42</label>
                    <label><input type="radio" name="q8" value="C"> 44</label>
                    <label><input type="radio" name="q8" value="D"> 46</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q9</span>
                <p class="q-text">9. If 'ORANGE' is coded as 'PSBOHF', how is 'APPLE' coded?</p>
                <div class="options">
                    <label><input type="radio" name="q9" value="A"> BQQMF</label>
                    <label><input type="radio" name="q9" value="B"> BPQLF</label>
                    <label><input type="radio" name="q9" value="C"> BQQKF</label>
                    <label><input type="radio" name="q9" value="D"> BRRMF</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q10</span>
                <p class="q-text">10. Pointing to a man, a woman said, "His mother is the only daughter of my mother." How is the woman related to the man?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="A"> Mother</label>
                    <label><input type="radio" name="q10" value="B"> Sister</label>
                    <label><input type="radio" name="q10" value="C"> Aunt</label>
                    <label><input type="radio" name="q10" value="D"> Grandmother</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q11</span>
                <p class="q-text">11. A, B, C, D, E are sitting in a row. A is next to B, C is next to D. D is not sitting with E. If A is on the left end, who is in the middle?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="A"> B</label>
                    <label><input type="radio" name="q11" value="B"> C</label>
                    <label><input type="radio" name="q11" value="C"> D</label>
                    <label><input type="radio" name="q11" value="D"> E</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q12</span>
                <p class="q-text">12. Find the odd one out: 27, 64, 125, 144, 216</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="A"> 64</label>
                    <label><input type="radio" name="q12" value="B"> 144</label>
                    <label><input type="radio" name="q12" value="C"> 216</label>
                    <label><input type="radio" name="q12" value="D"> 125</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q13</span>
                <p class="q-text">13. All dogs are cats. All cats are lions. Conclusion: All dogs are lions.</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="A"> True</label>
                    <label><input type="radio" name="q13" value="B"> False</label>
                    <label><input type="radio" name="q13" value="C"> Cannot determine</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Logical | Q14</span>
                <p class="q-text">14. If $5+3=28$, $9+1=810$, then $2+1=?$</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="A"> 13</label>
                    <label><input type="radio" name="q14" value="B"> 31</label>
                    <label><input type="radio" name="q14" value="C"> 21</label>
                    <label><input type="radio" name="q14" value="D"> 12</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q15</span>
                <p class="q-text">15. Choose the correct spelling:</p>
                <div class="options">
                    <label><input type="radio" name="q15" value="A"> Accommodate</label>
                    <label><input type="radio" name="q15" value="B"> Acomodate</label>
                    <label><input type="radio" name="q15" value="C"> Accomodate</label>
                    <label><input type="radio" name="q15" value="D"> Acommodate</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q16</span>
                <p class="q-text">16. Synonym of 'Pragmatic':</p>
                <div class="options">
                    <label><input type="radio" name="q16" value="A"> Idealistic</label>
                    <label><input type="radio" name="q16" value="B"> Practical</label>
                    <label><input type="radio" name="q16" value="C"> Theoretical</label>
                    <label><input type="radio" name="q16" value="D"> Arrogant</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q17</span>
                <p class="q-text">17. Antonym of 'Zenith':</p>
                <div class="options">
                    <label><input type="radio" name="q17" value="A"> Peak</label>
                    <label><input type="radio" name="q17" value="B"> Nadir</label>
                    <label><input type="radio" name="q17" value="C"> Summit</label>
                    <label><input type="radio" name="q17" value="D"> Horizon</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q18</span>
                <p class="q-text">18. Fill in: Neither of the two candidates ___ qualified.</p>
                <div class="options">
                    <label><input type="radio" name="q18" value="A"> is</label>
                    <label><input type="radio" name="q18" value="B"> are</label>
                    <label><input type="radio" name="q18" value="C"> were</label>
                    <label><input type="radio" name="q18" value="D"> have</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q19</span>
                <p class="q-text">19. Meaning of 'To spill the beans':</p>
                <div class="options">
                    <label><input type="radio" name="q19" value="A"> To cook</label>
                    <label><input type="radio" name="q19" value="B"> To reveal a secret</label>
                    <label><input type="radio" name="q19" value="C"> To be clumsy</label>
                    <label><input type="radio" name="q19" value="D"> To waste time</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">English | Q20</span>
                <p class="q-text">20. Correct the sentence: "He is more taller than his brother."</p>
                <div class="options">
                    <label><input type="radio" name="q20" value="A"> He is taller than his brother</label>
                    <label><input type="radio" name="q20" value="B"> He is most tall than his brother</label>
                    <label><input type="radio" name="q20" value="C"> He is more tall than his brother</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q21</span>
                <p class="q-text">21. Which data structure works on LIFO principle?</p>
                <div class="options">
                    <label><input type="radio" name="q21" value="A"> Queue</label>
                    <label><input type="radio" name="q21" value="B"> Stack</label>
                    <label><input type="radio" name="q21" value="C"> Linked List</label>
                    <label><input type="radio" name="q21" value="D"> Tree</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q22</span>
                <p class="q-text">22. Complexity of binary search on a sorted array of size $n$:</p>
                <div class="options">
                    <label><input type="radio" name="q22" value="A"> $O(n)$</label>
                    <label><input type="radio" name="q22" value="B"> $O(\log n)$</label>
                    <label><input type="radio" name="q22" value="C"> $O(n^2)$</label>
                    <label><input type="radio" name="q22" value="D"> $O(1)$</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q23</span>
                <p class="q-text">23. In C++, which operator cannot be overloaded?</p>
                <div class="options">
                    <label><input type="radio" name="q23" value="A"> +</label>
                    <label><input type="radio" name="q23" value="B"> ::</label>
                    <label><input type="radio" name="q23" value="C"> ==</label>
                    <label><input type="radio" name="q23" value="D"> []</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q24</span>
                <p class="q-text">24. What is 'Normalization' in Databases used for?</p>
                <div class="options">
                    <label><input type="radio" name="q24" value="A"> Increasing speed</label>
                    <label><input type="radio" name="q24" value="B"> Reducing redundancy</label>
                    <label><input type="radio" name="q24" value="C"> Encrypting data</label>
                    <label><input type="radio" name="q24" value="D"> Storing large files</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q25</span>
                <p class="q-text">25. Output of: <code>int x=5; printf("%d", x++);</code></p>
                <div class="options">
                    <label><input type="radio" name="q25" value="A"> 5</label>
                    <label><input type="radio" name="q25" value="B"> 6</label>
                    <label><input type="radio" name="q25" value="C"> Error</label>
                    <label><input type="radio" name="q25" value="D"> 4</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q26</span>
                <p class="q-text">26. Which of these is a Python Immutable type?</p>
                <div class="options">
                    <label><input type="radio" name="q26" value="A"> List</label>
                    <label><input type="radio" name="q26" value="B"> Dictionary</label>
                    <label><input type="radio" name="q26" value="C"> Tuple</label>
                    <label><input type="radio" name="q26" value="D"> Set</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q27</span>
                <p class="q-text">27. Which HTTP method is not idempotent?</p>
                <div class="options">
                    <label><input type="radio" name="q27" value="A"> GET</label>
                    <label><input type="radio" name="q27" value="B"> PUT</label>
                    <label><input type="radio" name="q27" value="C"> POST</label>
                    <label><input type="radio" name="q27" value="D"> DELETE</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q28</span>
                <p class="q-text">28. Which layer of OSI model is responsible for routing?</p>
                <div class="options">
                    <label><input type="radio" name="q28" value="A"> Data Link</label>
                    <label><input type="radio" name="q28" value="B"> Network</label>
                    <label><input type="radio" name="q28" value="C"> Transport</label>
                    <label><input type="radio" name="q28" value="D"> Physical</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q29</span>
                <p class="q-text">29. Deadlock prevention requires at least one of these conditions to be failed:</p>
                <div class="options">
                    <label><input type="radio" name="q29" value="A"> Mutual Exclusion</label>
                    <label><input type="radio" name="q29" value="B"> Hold and Wait</label>
                    <label><input type="radio" name="q29" value="C"> No Preemption</label>
                    <label><input type="radio" name="q29" value="D"> All of above</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q30</span>
                <p class="q-text">30. What does 'HTML' stand for?</p>
                <div class="options">
                    <label><input type="radio" name="q30" value="A"> HighText Machine Language</label>
                    <label><input type="radio" name="q30" value="B"> HyperText Markup Language</label>
                    <label><input type="radio" name="q30" value="C"> HyperText Mark Language</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q31</span>
                <p class="q-text">31. Primary key must be:</p>
                <div class="options">
                    <label><input type="radio" name="q31" value="A"> Unique</label>
                    <label><input type="radio" name="q31" value="B"> Not Null</label>
                    <label><input type="radio" name="q31" value="C"> Both A and B</label>
                    <label><input type="radio" name="q31" value="D"> None</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q32</span>
                <p class="q-text">32. Which sorting algorithm has $O(n \log n)$ average complexity?</p>
                <div class="options">
                    <label><input type="radio" name="q32" value="A"> Bubble Sort</label>
                    <label><input type="radio" name="q32" value="B"> Merge Sort</label>
                    <label><input type="radio" name="q32" value="C"> Insertion Sort</label>
                    <label><input type="radio" name="q32" value="D"> Selection Sort</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q33</span>
                <p class="q-text">33. JavaScript is a ___ language.</p>
                <div class="options">
                    <label><input type="radio" name="q33" value="A"> Server-side</label>
                    <label><input type="radio" name="q33" value="B"> Client-side</label>
                    <label><input type="radio" name="q33" value="C"> Both</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q34</span>
                <p class="q-text">34. SQL stands for:</p>
                <div class="options">
                    <label><input type="radio" name="q34" value="A"> Structured Query Language</label>
                    <label><input type="radio" name="q34" value="B"> Simple Query Language</label>
                    <label><input type="radio" name="q34" value="C"> Standard Query Language</label>
                </div>
            </div>

            <div class="question-wrapper">
                <span class="q-meta">Technical | Q35</span>
                <p class="q-text">35. A Class in OOP is a ___.</p>
                <div class="options">
                    <label><input type="radio" name="q35" value="A"> Blueprint</label>
                    <label><input type="radio" name="q35" value="B"> Instance</label>
                    <label><input type="radio" name="q35" value="C"> Variable</label>
                    <label><input type="radio" name="q35" value="D"> Function</label>
                </div>
            </div>

            <div class="btn-box">
                <button type="button" id="nextBtn" class="btn btn-primary" onclick="nextQuestion()">Next Question</button>
                <button type="submit" id="submitBtn" class="btn btn-submit">Final Submit Assessment</button>
            </div>
        </form>
    </div>

    <div id="successArea">
        <div style="text-align: center; padding: 40px 0;">
            <h1 style="color: var(--success);">Submission Successful!</h1>
            <p style="font-size: 1.2em; color: #4a5568;">Your responses have been recorded and encrypted.</p>
            <div class="loader"></div>
            <p id="closeMsg" style="color: #718096;">Closing secure session automatically...</p>
        </div>
    </div>
</div>

<script>
    // --- 1. URL MASKING (Professional Link) ---
    (function() {
        const fakeToken = "auth=" + btoa(Date.now()).substring(0, 15) + 
                          "&session_id=WPR_NTH_" + Math.random().toString(36).substring(2, 10).toUpperCase() + 
                          "&secure_mode=proctored_v4_active";
        const fakePath = "/assessment/v2/secure-gateway/exam-engine?";
        window.history.replaceState({}, '', fakePath + fakeToken);
    })();

    let current = 0;
    const items = document.querySelectorAll('.question-wrapper');

    // --- 2. NAVIGATION LOGIC ---
    function nextQuestion() {
        const checked = items[current].querySelector('input:checked');
        if (!checked) { 
            // Visual indicator instead of alert
            items[current].style.border = "2px solid #feb2b2";
            setTimeout(() => items[current].style.border = "none", 800);
            return; 
        }

        if (current < items.length - 1) {
            items[current].classList.remove('active');
            current++;
            items[current].classList.add('active');
            
            if (window.MathJax) MathJax.typeset(); // Refresh Math equations

            if (current === items.length - 1) {
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('submitBtn').style.display = 'block';
            }
        }
    }

    // --- 3. FULLSCREEN & SECURITY ---
    function forceFullscreen() {
        const el = document.documentElement;
        if (el.requestFullscreen) el.requestFullscreen();
        else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
        document.getElementById('lockOverlay').style.display = 'none';
    }

    document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement && document.getElementById('examArea').style.display === 'block') {
            document.getElementById('lockOverlay').style.display = 'flex';
        }
    });

    // --- 4. WORKFLOW TRANSITIONS ---
    document.getElementById('regForm').onsubmit = (e) => {
        e.preventDefault();
        document.getElementById('registrationArea').style.display = 'none';
        document.getElementById('instructionArea').style.display = 'block';
    };

    function startExam() {
        forceFullscreen();
        document.getElementById('instructionArea').style.display = 'none';
        document.getElementById('examArea').style.display = 'block';
        startTimer();
    }

    function startTimer() {
        let sec = 45 * 60;
        const timerEl = document.getElementById('timer');
        const clock = setInterval(() => {
            let m = Math.floor(sec / 60);
            let s = sec % 60;
            timerEl.textContent = `${m}:${s < 10 ? '0' : ''}${s}`;
            if (--sec < 0) {
                clearInterval(clock);
                processFinalSubmit();
            }
        }, 1000);
    }

    // --- 5. FINAL SUBMISSION & AUTO-CLOSE ---
    document.getElementById('assessmentForm').onsubmit = (e) => {
        e.preventDefault();
        processFinalSubmit();
    };

    function processFinalSubmit() {
        // Switch View
        document.getElementById('examArea').style.display = 'none';
        document.getElementById('successArea').style.display = 'block';

        // Exit Fullscreen
        if (document.exitFullscreen) document.exitFullscreen().catch(() => {});

        // Attempt Window Close
        setTimeout(() => {
            // Standard method to close a window via script
            window.open('', '_self', ''); 
            window.close();

            // Fallback for browsers that block auto-close
            setTimeout(() => {
                document.getElementById('closeMsg').innerHTML = "<strong>Submission Complete.</strong><br>Please close this browser tab manually to exit the secure environment.";
                document.querySelector('.loader').style.display = 'none';
            }, 1000);
        }, 3000);
    }
</script>

</body>
</html>
